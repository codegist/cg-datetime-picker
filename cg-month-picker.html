<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="cg-base-value-picker.html">

<dom-module id="cg-month-picker">
    <style>
        cg-base-value-picker ::content .value {
            width: calc(42% - 6px);
        }
    </style>
    <template>
        <cg-base-value-picker id="picker"
                              datetime="{{datetime}}" height="[[height]]"
                              min="0" max="11"
                              display-name="[[displayName]]"
                              current-value="[[currentValue]]"
                              to-datetime="[[toDatetime]]"
                              on-date-changed="_onChanged"></cg-base-value-picker>
    </template>
</dom-module>
<script>
    Polymer({
        is:'cg-month-picker',
        properties:{
            height:Number,
            datetime:{
                type:Date,
                notify:true,
            },
            displayName:{
                type:Function,
                value:function(){return this._displayName;},
                readonly:true
            },
            currentValue:{
                type:Function,
                value:function(){return this._currentValue;},
                readonly:true
            },
            toDatetime:{
                type:Function,
                value:function(){return this._toDateTime;},
                readonly:true
            },
        },
        scrollToSelection:function(now){
            this.$.picker.scrollToSelection(now);
        },
        _onChanged:function(e){
            this.fire("date-changed", e.detail);
        },
        _displayName:function(value){
            var date = new Date(2000, value, 1, 0, 0, 0);
            return new Intl.DateTimeFormat(this.locale, {month:'long'}).format(date);
        },
        _currentValue:function(date){
            return date.getMonth();
        },
        _toDateTime:function(selectedValue, currentDatetime){
            return new Date(currentDatetime.getFullYear(), selectedValue, currentDatetime.getDate(), currentDatetime.getHours(), currentDatetime.getMinutes(), currentDatetime.getSeconds());
        },
    });
</script>


