<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="cg-time-picker.html">
<link rel="import" href="cg-date-picker.html">

<dom-module id="cg-datetime-picker">
    <style>
        .wrapper {
            @apply(--layout-horizontal);
            @apply(--layout-center);
        }
        .wrapper .divider {
            width:20px;
        }
    </style>
    <template>
        <div class="wrapper">
            <cg-date-picker datetime="{{_pickerDate}}" on-date-changed="_selectionChanged"></cg-date-picker>
            <div class="divider"></div>
            <cg-time-picker datetime="{{_pickerDate}}" adjust-time="{{adjustTime}}" on-date-changed="_selectionChanged"></cg-time-picker>
        </div>
    </template>
</dom-module>
<script>
    Polymer({
        is:'cg-datetime-picker',
        properties:{
            datetime:{
                type:Date,
                notify:true,
                observer:'datetimeChanged',
            },
            adjustTime:{
                type:Boolean,
                value:false,
            }
        },
        _pickerDate:null,
        _selectionChanged:function(){
            this.datetime = this.datetime != null ? new Date(this._pickerDate.toISOString()) : this._pickerDate;
            this.fire("date-changed", this.datetime);
        },
        datetimeChanged:function(){
            this.adjustTime = this.datetime ? false : true;
            this._pickerDate = new Date((this.datetime || new Date()).toISOString());
        }
    });
</script>