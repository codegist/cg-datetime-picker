<link href="../polymer/polymer.html" rel="import">
<link href="cg-base-value-picker.html" rel="import">

<dom-module id="cg-year-picker">
<style>
    cg-base-value-picker ::content .value {
        width: calc(32% - 6px);
    }
    cg-base-value-picker ::content .value div {
        width: 64px;
        height: 64px;
    }
</style>
<template>
    <cg-base-value-picker id="picker"
                          datetime="{{datetime}}" height="[[height]]"
                          min="1900" max="2100"
                          display-name="[[displayName]]"
                          current-value="[[currentValue]]"
                          to-datetime="[[toDatetime]]"
                          on-date-changed="_onChanged"></cg-base-value-picker>
</template>
</dom-module>
<script>
    Polymer({
        is:'cg-year-picker',
        properties:{
            height:Number,
            datetime:{
                type:Date,
                notify:true,
            },
            displayName:{
                type:Function,
                value:function(){return this._displayName;},
                readonly:true
            },
            currentValue:{
                type:Function,
                value:function(){return this._currentValue;},
                readonly:true
            },
            toDatetime:{
                type:Function,
                value:function(){return this._toDateTime;},
                readonly:true
            },
        },
        scrollToSelection:function(now){
            this.$.picker.scrollToSelection(now);
        },
        _displayName:function(value){
            return value;
        },
        _currentValue:function(date){
            return date.getFullYear();
        },
        _toDateTime:function(selectedValue, currentDatetime){
            return new Date(selectedValue, currentDatetime.getMonth(), currentDatetime.getDate(), currentDatetime.getHours(), currentDatetime.getMinutes(), currentDatetime.getSeconds());
        },
        _onChanged:function(e){
            this.fire("date-changed", e.detail);
        },
    });
</script>
